<!DOCTYPE html>
<html lang="en">


<!-- Draggable DIV -->
<div id="mydiv">
  <!-- Include a header DIV with the same name as the draggable DIV, followed by "header" -->
  <button id="mydivheader" class="btn btn-xs">#</button>
  <details open class="dropdown">
    
    <summary class="btn-outline" >Expand</summary>
  <div id='cssmenu'>
    <ul class="menu lg:menu-horizontal bg-base-200 rounded-box lg:mb-64">
      <li>
        <details>
          <summary>File</summary>
          <ul>
            <li><a class="btn btn-ghost" onClick="save()" href="#">Save</a></li>
            <li><a class="btn btn-ghost" onClick="destroy()" href="#">Destroy</a></li>
            <li><a class="btn btn-ghost" onClick="load()" href="#">Create</a></li>
          </ul>
        </details>
      </li>
      <li>
        <details>
          <summary>Insert</summary>
          <ul>
            <li><div class="btn">
              <!-- manually force a drop size of 2x2 for nested size -->
              <div class="grid-stack-item" gs-w="2" gs-h="1" id="nestedpress">
                <div class="grid-stack-item-content" id="nesteddrag">Nest</div>
              </div>


              
            </div></li>

            <li><div class="sidebar">
              <!-- manually force a drop size of 2x2 for nested size -->
              <div class="grid-stack-item" gs-w="2" gs-h="1" id="widgetpress" contentEditable="true">
                <div class="grid-stack-item-content" id="widgetdrag">Widget</div>
              </div>
              
            </div></li>

            <li><div class="sidebar">
              <!-- manually force a drop size of 2x2 for nested size -->
              <div class="grid-stack-item" gs-w="2" gs-h="1" id="">
                <div class="grid-stack-item-content" id=""><a class="btn btn-outline" contenteditable="true">abc</a></div>
              </div>
              
            </div></li>

            <li><div class="sidebar">
              <!-- manually force a drop size of 2x2 for nested size -->
              <div class="grid-stack-item" gs-w="2" gs-h="1" id="">
                <div class="grid-stack-item-content" id=""><a class="btn btn-outline">abc</a></div>
              </div>
              
            </div></li>

            <li><div class="sidebar">
              <!-- manually force a drop size of 2x2 for nested size -->
              <div class="grid-stack-item" gs-w="2" gs-h="1" id="">
                <div class="grid-stack-item-content" id=""> 
                  <button class="chuncky-btn" onClick="grid.removeWidget(this.parentNode.parentNode)">X</button>
                  <!-- Open the modal using ID.showModal() method -->
                  <button class="chuncky-btn" onclick="my_modal_2.showModal()">Configurator</button>

                  <br>
                  <h3>Sensor Values</h3>
                  <div class="sensor-value" id="temperature">Temperature: -- Â°C</div>
                  <div class="sensor-value" id="humidity">Humidity: -- %</div>
                  <div class="sensor-value" id="pressure">Pressure: -- hPa</div>
                </div>
              </div>
            </div></li>

            <li><div class="sidebar">
              <!-- manually force a drop size of 2x2 for nested size -->
              <div class="grid-stack-item" gs-w="2" gs-h="1" id="">
                <div class="grid-stack-item-content" id=""> 
                  <button class="chuncky-btn" onClick="grid.removeWidget(this.parentNode.parentNode)">X</button>
                  <!-- Open the modal using ID.showModal() method -->
                  <button class="chuncky-btn" onclick="my_modal_2.showModal()">Configurator</button>
                  <br>
                  <h3>Sensor Trends</h3>
                  <canvas id="sensorChart"></canvas>
                </div>
              </div>
            </div></li>

            <li><div class="sidebar">
              <!-- manually force a drop size of 2x2 for nested size -->
              <div class="grid-stack-item" gs-w="2" gs-h="1" id="">
                <div class="grid-stack-item-content" id=""> 
                  <button class="chuncky-btn" onClick="grid.removeWidget(this.parentNode.parentNode)">X</button>
                  <!-- Open the modal using ID.showModal() method -->
                  <button class="chuncky-btn" onclick="my_modal_2.showModal()">Configurator</button>
                  <br>
                  <h3>Terrain Overview</h3>
                  <div id="map" class="map-container"></div>
                </div>
              </div>
            </div></li>

           
            <dialog id="my_modal_2" class="modal">
              <div class="modal-box">
                <h3 class="text-lg font-bold">Configurator</h3>
                <p class="py-4">Add/select stream for button {}</p>
                <p class="py-4">Current Stream {}</p>
                <input id="App-Configurator-select-stream-input">
                <details>
                  <summary id="App-Configurator-active-streams-dropdown">Streams</summary>
                  
                    <ul class="menu menu-xs bg-base-200 rounded-lg " id="App-Configurator-active-streams-dropdown-content">
                      <li>
                        <details open>
                          <summary>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke-width="1.5"
                              stroke="currentColor"
                              class="h-4 w-4">
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z" />
                            </svg>
                            Module 1
                          </summary>
                          <ul>
                            <li>
                              <a>
                                <svg
                                  xmlns="http://www.w3.org/2000/svg"
                                  fill="none"
                                  viewBox="0 0 24 24"
                                  stroke-width="1.5"
                                  stroke="currentColor"
                                  class="h-4 w-4">
                                  <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                                </svg>
                                Stream 1
                              </a>
                            </li>
                            <li>
                              <a>
                                <svg
                                  xmlns="http://www.w3.org/2000/svg"
                                  fill="none"
                                  viewBox="0 0 24 24"
                                  stroke-width="1.5"
                                  stroke="currentColor"
                                  class="h-4 w-4">
                                  <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                                </svg>
                                Stream 2
                              </a>
                            </li>
                            <li>
                              <details open>
                                <summary>
                                  <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke-width="1.5"
                                    stroke="currentColor"
                                    class="h-4 w-4">
                                    <path
                                      stroke-linecap="round"
                                      stroke-linejoin="round"
                                      d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z" />
                                  </svg>
                                  Collection 1
                                </summary>
                                <ul>
                                  <li>
                                    <a>
                                      <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        fill="none"
                                        viewBox="0 0 24 24"
                                        stroke-width="1.5"
                                        stroke="currentColor"
                                        class="h-4 w-4">
                                        <path
                                          stroke-linecap="round"
                                          stroke-linejoin="round"
                                          d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                                      </svg>
                                      Stream 5
                                    </a>
                                  </li>
                                  <li>
                                    <a>
                                      <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        fill="none"
                                        viewBox="0 0 24 24"
                                        stroke-width="1.5"
                                        stroke="currentColor"
                                        class="h-4 w-4">
                                        <path
                                          stroke-linecap="round"
                                          stroke-linejoin="round"
                                          d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                                      </svg>
                                      Stream 6
                                    </a>
                                  </li>
                                  <li>
                                    <details open>
                                      <summary>
                                        <svg
                                          xmlns="http://www.w3.org/2000/svg"
                                          fill="none"
                                          viewBox="0 0 24 24"
                                          stroke-width="1.5"
                                          stroke="currentColor"
                                          class="h-4 w-4">
                                          <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z" />
                                        </svg>
                                        Nested Collection 1 
                                      </summary>
                                      <ul>
                                        <li>
                                          <a>
                                            <svg
                                              xmlns="http://www.w3.org/2000/svg"
                                              fill="none"
                                              viewBox="0 0 24 24"
                                              stroke-width="1.5"
                                              stroke="currentColor"
                                              class="h-4 w-4">
                                              <path
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                                            </svg>
                                            Stream 7
                                          </a>
                                        </li>
                                      </ul>
                                    </details>
                                  </li>
                                </ul>
                              </details>
                            </li>
                          </ul>
                        </details>
                      </li>
                      <li>
                        <details open>
                          <summary>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke-width="1.5"
                              stroke="currentColor"
                              class="h-4 w-4">
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z" />
                              </svg>
                              Module 2
                            </summary>
                            <ul>
                              <li>
                                <a>
                                  <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke-width="1.5"
                                    stroke="currentColor"
                                    class="h-4 w-4">
                                    <path
                                      stroke-linecap="round"
                                      stroke-linejoin="round"
                                      d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                                  </svg>
                                  Stream 3
                                </a>
                              </li>
                              <li>
                                <a>
                                  <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke-width="1.5"
                                    stroke="currentColor"
                                    class="h-4 w-4">
                                    <path
                                      stroke-linecap="round"
                                      stroke-linejoin="round"
                                      d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                                  </svg>
                                  Stream 4
                                </a>
                              </li>
                            </ul>
                          </details>
                        </li>
                        <li>
                          <a>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke-width="1.5"
                              stroke="currentColor"
                              class="h-4 w-4">
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                            </svg>
                            Singlular Stream Module
                          </a>
                        </li>
                      </ul>
                
                  </details>
                  <button class="btn btn-primary">Save</button>
                </div>
                <form method="dialog" class="modal-backdrop">
                  <button>close</button>
                </form>
              </dialog>


              <li><div class="trash" id="trash">Drop to remove</div></li>
            </ul>
          </details>
        </li>
        <li>
          <details>
            <summary>Load</summary>
            <ul>
              <li><a class="btn btn-ghost" onClick="save(true, false)" href="#">Save list</a></li>
              <li><a class="btn btn-ghost" onClick="save(false, false)" href="#">Save no content</a></li>
              <li><a class="btn btn-ghost" onClick="destroy(false)" href="#">Clear</a></li>
              <li><a class="btn btn-ghost" onClick="load(false)" href="#">Load</a></li>
            </ul>
          </details>
        </li>
      </ul>
      </div>
      </details>
</div>


<head>
  <script src="./assets/js/core/jquery.min.js"></script>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dash</title>
  <link rel="stylesheet" href="./assets/css/gridstackdemo.css"/>
  <link href="./assets/node_modules/gridstack/dist/gridstack-extra.min.css" rel="stylesheet"/>
  <script src="./assets/node_modules/gridstack/dist/gridstack-all.js"></script>

  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
  <script src="https://cdn.tailwindcss.com"></script>
  
  <link href="./assets/css/toolbar.css" rel="stylesheet" type="text/css" />
  <script src="./assets/js/custom/toolbar.js"></script>

  <script src="./assets/js/custom/gridstackevents.js"></script>

  <link href="./assets/css/aresv2.css" rel="stylesheet" type="text/css" />

  <link href="./assets/css/electron.css" rel="stylesheet" type="text/css" />

  <link rel="stylesheet" href="assets/css/sidebar.css">
  <link rel="stylesheet" href="assets/css/animate.min.css">
  <script src="./assets/js/custom/sidebar.js" defer></script>

  <!-- Web fonts -->
  <link rel="stylesheet" href="./assets/fonts/Railway-OpenSans.css">

  <!-- Add these new stylesheets -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.css" />
  
  <!-- Add this custom CSS -->
  <style>
    body {
      background-color: #161616;
      color: #64ffda;
      font-family: 'Roboto Mono', monospace;
    }
    .grid-stack-item-content {
      background-color: #020406;
      border: 1px solid #333333;
      border-radius: 5px;
      padding: 10px;
    }
    .map-container {
      height: 100%;
      width: 100%;
    }
    .sensor-value {
      font-size: 24px;
      font-weight: bold;
    }
    .status-bar {
      background-color: #000000;
      color: #64ffda;
      padding: 5px 10px;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      display: flex;
      justify-content: space-between;
    }
  </style>
</head>
<body>
  <div id="page-container" class="modern-sf">

<marquee direction="left" speed="normal" behavior="loop" class="marquee top-bar h-5 cursor-grab" id="AriesUI-app-scroll-status">
  Status {}
</marquee>
<header id="header-main">`

  <div class="navbar">
    <div class="flex-1">
      <div class="flex-1 on-top text-3xl main-title"><span>// </span><a class="link-sf" id="title-main" onclick="openNav()">comms</a></div>
    </div>
    <div class="flex-none">
      <ul class="menu menu-horizontal px-1">
        <li class="on-top">
          <details>
            <summary id="SH-active-streams-dropdown">Streams</summary>
            
              <ul class="menu menu-xs bg-base-200 rounded-lg " id="SH-active-streams-dropdown-content">
                <li>
                  <details open>
                    <summary>
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke-width="1.5"
                        stroke="currentColor"
                        class="h-4 w-4">
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z" />
                      </svg>
                      Module 1
                    </summary>
                    <ul>
                      <li>
                        <a>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke-width="1.5"
                            stroke="currentColor"
                            class="h-4 w-4">
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                          </svg>
                          Stream 1
                        </a>
                      </li>
                      <li>
                        <a>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke-width="1.5"
                            stroke="currentColor"
                            class="h-4 w-4">
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                          </svg>
                          Stream 2
                        </a>
                      </li>
                      <li>
                        <details open>
                          <summary>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke-width="1.5"
                              stroke="currentColor"
                              class="h-4 w-4">
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z" />
                            </svg>
                            Collection 1
                          </summary>
                          <ul>
                            <li>
                              <a>
                                <svg
                                  xmlns="http://www.w3.org/2000/svg"
                                  fill="none"
                                  viewBox="0 0 24 24"
                                  stroke-width="1.5"
                                  stroke="currentColor"
                                  class="h-4 w-4">
                                  <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                                </svg>
                                Stream 5
                              </a>
                            </li>
                            <li>
                              <a>
                                <svg
                                  xmlns="http://www.w3.org/2000/svg"
                                  fill="none"
                                  viewBox="0 0 24 24"
                                  stroke-width="1.5"
                                  stroke="currentColor"
                                  class="h-4 w-4">
                                  <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                                </svg>
                                Stream 6
                              </a>
                            </li>
                            <li>
                              <details open>
                                <summary>
                                  <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke-width="1.5"
                                    stroke="currentColor"
                                    class="h-4 w-4">
                                    <path
                                      stroke-linecap="round"
                                      stroke-linejoin="round"
                                      d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z" />
                                  </svg>
                                  Nested Collection 1 
                                </summary>
                                <ul>
                                  <li>
                                    <a>
                                      <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        fill="none"
                                        viewBox="0 0 24 24"
                                        stroke-width="1.5"
                                        stroke="currentColor"
                                        class="h-4 w-4">
                                        <path
                                          stroke-linecap="round"
                                          stroke-linejoin="round"
                                          d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                                      </svg>
                                      Stream 7
                                    </a>
                                  </li>
                                </ul>
                              </details>
                            </li>
                          </ul>
                        </details>
                      </li>
                    </ul>
                  </details>
                </li>
                <li>
                  <details open>
                    <summary>
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke-width="1.5"
                        stroke="currentColor"
                        class="h-4 w-4">
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z" />
                      </svg>
                      Module 2
                    </summary>
                    <ul>
                      <li>
                        <a>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke-width="1.5"
                            stroke="currentColor"
                            class="h-4 w-4">
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                          </svg>
                          Stream 3
                        </a>
                      </li>
                      <li>
                        <a>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke-width="1.5"
                            stroke="currentColor"
                            class="h-4 w-4">
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                          </svg>
                          Stream 4
                        </a>
                      </li>
                    </ul>
                  </details>
                </li>
                <li>
                  <a>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke-width="1.5"
                      stroke="currentColor"
                      class="h-4 w-4">
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                    </svg>
                    Singlular Stream Module
                  </a>
                </li>
              </ul>
          
          </details>
        </li>
        <li class="on-top">
          <details>
            <summary class="text animated infinite pulse pull-right" id="App-live-status-dropdown"><a>[Link]</a></summary>
            <ul>
              <li>
                <details>
                  <summary id="SH-live-status" class="text animated infinite pulse pull-right">StreamHandler</summary>
                  <ul>
                    <li><a id="Itf-connect-btn">Connect</a></li>
                    <li><a id="Itf-close-btn">Disconnect</a></li>
                    <li><label class="label-text">Reconnect</label><input type="checkbox" class="toggle" checked="checked" id="Itf-reconnect-btn"/></li>
                    
                  </ul>
                </details>
                <details>
                  <summary>ariesUI</summary>
                  <ul>
                    <li><a>Connect</a></li>
                    <li><a>Disconnect</a></li>
                  </ul>
                </details>
                <details>
                  <summary>Engine</summary>
                  <ul>
                    <li><a>Connect</a></li>
                    <li><a>Disconnect</a></li>
                  </ul>
                </details>
              </li>
            </ul>
          </details>
        </li>
        
        <li class="on-top">
          <details>
            <summary>Device</summary>
            <ul>
              <li><a>Submenu 1</a></li>
              <li><a>Submenu 2</a></li>
              <li>
                <details open>
                  <summary>Parent</summary>
                  <ul>
                    <li><a>item 1</a></li>
                    <li><a>item 2</a></li>
                  </ul>
                </details>
              </li>
            </ul>
          </details>
        </li>
      </ul>
    </div>
  </div>
 </header>
  <div id="mySidenav" class="sidenav" onmouseleave="closeNav()" style="left: 0%; width: 0px;">
    <a href="index.html" class="nav-link">Dashboard</a>
    <a href="#" class="nav-link">Config</a>
    <a href="#" class="nav-link">Logs</a>
    <a href="#" class="nav-link">Terminal</a>
    <a href="#" class="nav-link">Comms</a>
    <a href="DAQ.html" class="nav-link">DAQ</a>
  </div>


  <div id="myDevicenav" class="sidenav" onmouseleave="closeDeviceNav()" style="left: 82%; width: 0px; visibility: hidden;">
      <a href="#" class="nav-link">WiFi</a>
      <a href="#" class="nav-link">Mavlink</a>
      <a href="#" class="nav-link">Bluetooth</a>
      <a href="#" class="nav-link">LabJack</a>
      <a href="#" class="nav-link">RS</a>
      <a href="#" class="nav-link">SSH</a>
      <a href="#" class="nav-link">LoRa</a>
    </div>
  </div>
  <div class="container-fluid">

    <!-- Main map/terrain overview

     -->
    <!-- Sensor values -->

    
    <!-- Graphs -->

    
    <!-- Add more grid items as needed -->
  </div>
  
  <!-- Status bar -->
  <div class="status-bar">
    <span id="status-message">System Status: Operational</span>
    <span id="current-time"></span>
  </div>

  <script type="text/javascript">
    let sub1 = [ {x:0, y:0}, {x:1, y:0}, {x:2, y:0}, {x:3, y:0}, {x:0, y:1}, {x:1, y:1}];
    let sub2 = [ {x:0, y:0, h:2}, {x:1, y:1, w:2}];
    let count = 0;
    [...sub1, ...sub2].forEach(d => d.content = String(count++));
    let subOptions = {
      cellHeight: 50, // should be 50 - top/bottom
      column: 'auto', // size to match container. make sure to include gridstack-extra.min.css
      acceptWidgets: true, // will accept .grid-stack-item by default
      subdGridDynamic: true, // make it recursive for all future sub-grids
      margin: 5,
      float: true, // allow items to float up if there is space
      removable: '.trash', // drag items to the trash to remove them
      
    };
    let options = { // main grid options
      cellHeight: 50,
      margin: 5,
      minRow: 15, // don't collapse when empty
      acceptWidgets: true,
      subdGridDynamic: true, // make it recursive for all future sub-grids
      float: true,
      id: 'main',
      removable: '.trash',
      subGridOpts: subOptions, // all sub grids will default to those
      
      children: [
        {x:0, y:0, content: 'regular item'},
        {x:1, y:0, w:4, h:4, sizeToContent: true, subGridOpts: {children: sub1, id:'sub1_grid', class: 'sub1'}},
        {x:5, y:0, w:3, h:4, subGridOpts: {children: sub2, id:'sub2_grid', class: 'sub2'}},
      ]
    };

    // create and load it all from JSON above
    let grid = GridStack.addGrid(document.querySelector('.container-fluid'), options);
/*
    // add debug event handlers to each grid (no global set on parent yet)
    let gridEls = GridStack.getElements('.grid-stack');
    gridEls.forEach(gridEl => {
      let grid = gridEl.gridstack;
      addEvents(grid, grid.opts.id);
    })
*/
    // setup drag drop behavior
    GridStack.setupDragIn('.sidebar .grid-stack-item', { appendTo: 'body', helper: myClone });

    function addWidget() {
      grid.addWidget({x:Math.floor(Math.random() * 10), y:Math.floor(Math.random() * 10), content:'<div contentEditable="true">Widget</div>'});
    }

    function addNested() {
      grid.addWidget({x:Math.floor(Math.random() * 10), y:Math.floor(Math.random() * 10), subGridOpts: {
        children: [ {content: '<div contentEditable="true">Nested 1</div>'}],
        ...subOptions}
      });
    }

    function addNewWidget(selector) {
      let subGrid = document.querySelector(selector).gridstack;
      let node = {
        x: Math.round(6 * Math.random()),
        y: Math.round(5 * Math.random()),
        w: Math.round(1 + 1 * Math.random()),
        h: Math.round(1 + 1 * Math.random()),
        content: String(count++)
      };
      subGrid.addWidget(node);
      return false;
    };


    nestedpress = document.getElementById('nestedpress');
    widgetpress = document.getElementById('widgetpress');

    if (nestedpress) {
      nestedpress.addEventListener('click', function() {
        addNested();
      });
    }

    if (widgetpress) {
      widgetpress.addEventListener('click', function() {
        addWidget();
      });
    }

      // decide what the dropped item will be - for now just a clone but can be anything
      function myClone(event, prevNode, n) {
        const el = event.target.cloneNode(true);
        el.setAttribute('gs-id', 'foo');
        return el;
      if (event.target.id === 'widgetdrag') {
        const el = event.target.cloneNode(true);
        el.setAttribute('gs-id', 'foo');
        return el;
      }
      //const el = event.target.cloneNode(true);
      console.log(event.target.id);
      //el.setAttribute('gs-id', 'foo'); // TEST why clone element is not used directly on drop #2231
      //return el;
    }



    function save(content = true, full = true) {
      options = grid.save(content, full);
      console.log(options);
      // console.log(JSON.stringify(options));
    }
    function destroy(full = true) {
      if (full) {
        grid.off('dropped');
        grid.destroy();
        grid = undefined;
      } else {
        grid.removeAll();
      }
    }
    function load(full = true) {
      if (full) {
        grid = GridStack.addGrid(document.querySelector('.container-fluid'), options);
        
      } else {
        grid.load(options);
      }
    }
  </script>

  <!-- logic -->
  <script src="./ariesUI.js" defer></script>
  <script src="./stream_interface.js"></script>

  <!-- Add these new scripts -->
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
  
  <script>

    /*
    // Initialize map
    var map = L.map('map').setView([51.505, -0.09], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Initialize chart
    var ctx = document.getElementById('sensorChart').getContext('2d');
    var chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: [],
        datasets: [{
          label: 'Temperature',
          data: [],
          borderColor: 'rgb(255, 99, 132)',
          tension: 0.1
        }, {
          label: 'Humidity',
          data: [],
          borderColor: 'rgb(54, 162, 235)',
          tension: 0.1
        }, {
          label: 'Pressure',
          data: [],
          borderColor: 'rgb(75, 192, 192)',
          tension: 0.1
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false
      }
    });
    */

    // Update sensor values and chart (simulate real-time data)
    function updateSensorData() {
      var temp = Math.random() * 30 + 10;
      var humidity = Math.random() * 50 + 30;
      var pressure = Math.random() * 100 + 900;
      
      document.getElementById('temperature').textContent = `Temperature: ${temp.toFixed(1)} Â°C`;
      document.getElementById('humidity').textContent = `Humidity: ${humidity.toFixed(1)} %`;
      document.getElementById('pressure').textContent = `Pressure: ${pressure.toFixed(1)} hPa`;
      
      var time = new Date().toLocaleTimeString();
      chart.data.labels.push(time);
      chart.data.datasets[0].data.push(temp);
      chart.data.datasets[1].data.push(humidity);
      chart.data.datasets[2].data.push(pressure);
      
      if (chart.data.labels.length > 10) {
        chart.data.labels.shift();
        chart.data.datasets.forEach(dataset => dataset.data.shift());
      }
      
      chart.update();
    }

    setInterval(updateSensorData, 2000);

    // Update current time in status bar
    function updateTime() {
      document.getElementById('current-time').textContent = new Date().toLocaleString();
    }

    setInterval(updateTime, 1000);
  </script>

</body>
</html>
